(function(){"use strict";let a,r=null;function c(){return(r===null||r.buffer!==a.memory.buffer)&&(r=new Int32Array(a.memory.buffer)),r}let i=null;function m(){return(i===null||i.buffer!==a.memory.buffer)&&(i=new Uint32Array(a.memory.buffer)),i}function u(e,t){return m().subarray(e/4,e/4+t)}function w(e,t,n,s,o){try{const f=a.__wbindgen_add_to_stack_pointer(-16);a.mandelbrot(f,e,t,n,s,o);var y=c()[f/4+0],b=c()[f/4+1],g=u(y,b).slice();return a.__wbindgen_free(y,b*4),g}finally{a.__wbindgen_add_to_stack_pointer(16)}}async function _(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(s){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",s);else throw s}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}async function l(e){typeof e=="undefined"&&(e=new URL("/fractals/assets/calc_engine_bg.0c8c4675.wasm",self.location));const t={};(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:s}=await _(await e,t);return a=n.exports,l.__wbindgen_wasm_module=s,a}onmessage=async({data:{startX:e,startY:t,delta:n,size:s,maxIter:o}})=>{await l(),postMessage(w(e,t,n,s,o))}})();
